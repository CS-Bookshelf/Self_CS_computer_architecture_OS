# 09-2. 운영체제의 큰 그림

<aside>

- 커널에 대한 학습
- 이중 모드, 시스템 호출 개념 학습
</aside>

# 운영체제의 심장, 커널

### 운영체제의 핵심 서비스

- 자원에 접근하고 조작하는 기능, 프로그램이 올바르고 안전하게 실행되게 하는 기능

### 커널

- 운영체제의 핵심 서비스를 담당한다.

### 사용자 인터페이스 (UI)

- 윈도우의 바탕화면과 같이 사용자가 컴퓨터와 상호작용할 수 있는 통로
- 운영체제가 제공하는 서비스이지만 커널에 포함되지 않는 서비스.
    - 그래픽 유저 인터페이서 (GUI) - 윈도우 바탕화면이나 스마트폰의 화면처럼 그래픽을 기반으로 컴퓨터와 상호작용.
    - 커맨드 라인 인터페이스 (CLI) - 명령어를 기반으로 컴퓨터와 상호작용

# 이중 모드와 시스템 호출

### 운영체제

- 사용자가 실행하는 응용 프로그램이 하드웨어 자원에 직접 접근하는 것 방지해 자원 보호
    - ‘운영체제에 도움을 요청’ == ‘운영체제 코드를 실행하려고 한다’
    - 응용 프로그램의 요청을 받은 운영체제는 응용 프로그램 대신 자원에 접근해 요청한 작업 수행.



### 이중 모드 (Dual mode)

- CPU가 명령어를 실행하는 모드를 크게 **사용자 모드**와 **커널 모드**로 구분하는 방식
    - **사용자 모드** - 운영체제 서비스를 제공받을 수 없는 실행 모드; 커널 영역의 코드 실행 불가
        - 사용자 모드로 실행되는 일반적인 응용 프로그램은 자원에 접근 불가
    
    - **커널 모드** - 운영체제 서비스를 제공받을 수 있는 실행 모드 ; 커널 영역의 코드 실행 가능
        - 커널 모드로 명령어를 실행하면 자원에 접근하는 명령어를 비롯한 모든 명령어 실행 가능




→ CPU가 어떤 모드로 실행 중인지는 플래그 레지스터 속 **슈퍼바이저 플래그**를 보면 알 수 있다.

### 시스템 호출 (시스템 콜)

- 운영체제 서비스를 제공받기 위한 요청
- 사용자 모드로 실행되는 프로그램은 이를 통해 커널모드로 전환해 서비스를 제공받을 수 있다.




- 소프트웨어 인터럽트 중 하나.
    - 인터럽트는 입출력장치에 의해 발생하기도 하고 특정 명령어에 의해서도 발생한다.
    - CPU가 시스템 호출을 처리하는 순서 - 인터럽트 처리 순서와 유사.




- 한 응용 프로그램이 하드 디스크에 데이터를 저장하려 한다고 가정
    1. 응용 프로그램은 하드 디스크에 데이터를 저장하는 시스템 호출을 발생시켜 커널 모드로 전환
    2. 운영체제 내의 ‘하드디스크에 데이터를 저장하는 코드’ 를 실행함으로써 하드 디스크에 접근 가능
    3. 하드디스크에 접근이 끝났다면 다시 사용자 모드로 복귀해 실행 이어나감.







→ 시스템 호출의 종류

# 운영체제의 핵심 서비스

- 프로세스 관리
- 자원 접근 및 할당
- 파일 시스템 관리

### 프로세스 관리

- 프로세스 - 실행 중인 프로그램
- 윈도우 [작업 관리자] → [프로세스] 에서 확인 가능.

- CPU 는 한 번에 하나의 프로세스만 실행 가능. → 이 프로세스들을 조금씩 번갈아 가며 실행



- 각 프로세스는 상태, 사용하고자 하는 자원도 다양하다 → 이를 잘 관리하고 실행할 수 있어야 함. (12, 13장)

### 자원 접근 및 할당

- **CPU** - **CPU 스케줄링**을 통해 CPU를 프로세스에게 공정하게 할당해준다. (11장)
- **메모리** - 메모리에 적재된 프로세스들의 크기, 주소 가지각색 → 프로세스에게 어떻게 메모리를 할당하는지, 메모리가 부족할 경우 이를 어떻게 극복하는지 (14장)
- **입출력장치** - 입출력장치가 CPU에 하드웨어 인터럽트 요청 신호를 보내면 CPU는 하던 일을 백업한 후 커널 영역에 있는 인터럽트 서비스 루틴을 실행한다. → 인터러브 서비스 루틴을 제공해 입출력작업 수행

### 파일 시스템 관리

- **파일 시스템** - 운영체제가 보조기억장치 속 데이터를 어떻게 파일과 디렉토리로 관리하는가? (15장)

### 가상 머신

- 가상 머신 → 응용 프로그램 → 사용자 모드로 작동함.
    - 가상 머신상 설치된 운영체제 또한 사용자 모드로 동작 → 운영체제 서비스를 제공받기 위해서는 커널 모드로 전환 필요
        - 따라서 가상화를 지원하는 CPU는 커널 모드, 사용자 모드 이외에 가상 머신을 위한 모드 “**하이퍼바이저 모드**” 가 존재한다.

# 마무리

### 키워드

- **커널**
    
    **→ 커널**은 운영체제의 핵심 기능을 담당
    
- **이중 모드**
    
    **→ 이중 모드**는 CPU가 명령어를 실행하는 모드를 커널 모드와 사용자 모드로 구분하는 방식
    
- **시스템 호출**
    
    **→ 시스템 호출**은 운영체제의 서비스를 제공받기 위해 커널 모드로 전환하는 방법
    
- **운영체제 서비스**
    
    → 대표적인 **운영체제 서비스** - 프로세스 관리, 자원 접근 및 할당, 파일 시스템 관리
    

### 확인 문제

- 커널은 운영체제의 핵심 기능을 담당하는 부분
- 시스템 호출은 일종의 인터럽트이다. → 인터럽트와 연관이 있다.
- 사용자 인터페이스 제공은 운영체제의 핵심 서비스는 아니다.
